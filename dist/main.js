(()=>{"use strict";const e=document.querySelector(".timer");let t={sessionLength:25,breakLength:5};const n=new Audio("http://soundbible.com/grab.php?id=1531&type=mp3");let s,r,o,i,a=!1,l=!0,c=0,m=!1;const d=e=>{let t=e-(new Date).getTime();const n=Math.floor(t/1e3%60),s=Math.floor(t/1e3/60%60);return{total:t,hours:Math.floor(t/36e5%24),minutes:s,seconds:n}};document.querySelector(".reset-button").addEventListener("click",(()=>{i&&(clearInterval(i),e.classList.remove("timer-break"),e.classList.remove("timer-session"),e.classList.remove("timer-paused"),document.querySelector(".display").textContent="Click to Start!",a=!1,l=!0,m=!1)})),document.querySelector(".timer").addEventListener("click",(()=>{a?(e.classList.toggle("timer-paused"),l?r=new Date((new Date).getTime()+o).getTime():o=d(r).total):(s=(new Date).getTime(),r=new Date(s+6e4*t.sessionLength).getTime(),i=setInterval((()=>{let s=d(r);l||(s.total>0&&(document.querySelector(".display").textContent=s.minutes+":"+s.seconds,m?(e.classList.remove("timer-session"),e.classList.toggle("timer-break")):(e.classList.remove("timer-break"),e.classList.toggle("timer-session"))),s.total<0&&(!1===m?(r=new Date(r+6e4*t.breakLength).getTime(),m=!0):(clearInterval(i),a=!1,m=!1,l=!0,document.querySelector(".display").textContent=`Session ${++c} and break ended.`),n.play()))}),1e3),a=!a),l=!l}));const u=document.querySelector("body"),b=(e,t)=>{e.classList.add(t)},g=(e,t)=>{e.textContent=t},v=(e,t)=>{e.appendChild(t)},p=document.createElement("div");p.addEventListener("click",(()=>{h.remove(),p.remove()})),b(p,"black-out");const h=document.createElement("div"),L=document.createElement("p");b(L,"form-header");const y=document.createElement("button");y.setAttribute("type","submit"),g(y,"Save"),g(L,"Pomodoro Timer Settings"),v(h,L),b(h,"settings-container");const k=document.createElement("form");k.setAttribute("method","post"),k.setAttribute("action","index.html"),b(k,"form");const E=document.createElement("input"),S=document.createElement("input");E.setAttribute("type","text"),E.setAttribute("placeholder","Enter session length..."),E.setAttribute("name","session-len"),S.setAttribute("type","text"),S.setAttribute("placeholder","Enter break length..."),S.setAttribute("name","break-len"),v(k,E),v(k,S),v(k,y),v(h,k);document.querySelector(".settings").addEventListener("click",(()=>{v(u,h),v(u,p)})),k.addEventListener("submit",(e=>{e.preventDefault();const n=k.elements["session-len"].value,s=k.elements["break-len"].value;0!==n.trim().length&&(t.sessionLength=n),0!==s.trim().length&&(t.breakLength=s),h.remove(),p.remove()})),u.addEventListener("keydown",(e=>{"Escape"===e.code&&(h.remove(),p.remove())}))})();