(()=>{"use strict";const e=document.querySelector(".timer");let t={sessionLength:25,breakLength:5};const n=new Audio("https://soundbible.com/grab.php?id=1531&type=mp3");let s,o,r,i,c=!1,l=!0,a=0,m=!1;const d=e=>{let t=e-(new Date).getTime();const n=Math.floor(t/1e3%60),s=Math.floor(t/1e3/60%60);return{total:t,hours:Math.floor(t/36e5%24),minutes:s,seconds:n}};document.querySelector(".reset-button").addEventListener("click",(()=>{i&&(clearInterval(i),e.classList.remove("timer-break"),e.classList.remove("timer-session"),e.classList.remove("timer-paused"),document.querySelector(".display").textContent="Click to Start!",c=!1,l=!0,m=!1)})),document.querySelector(".timer").addEventListener("click",(()=>{c?(e.classList.toggle("timer-paused"),l?o=new Date((new Date).getTime()+r).getTime():r=d(o).total):(s=(new Date).getTime(),o=new Date(s+6e4*t.sessionLength).getTime(),i=setInterval((()=>{let s=d(o);l||(s.total>0&&(s.minutes<10?document.querySelector(".display").textContent="0"+s.minutes+":"+s.seconds:s.seconds<10&&(document.querySelector(".display").textContent=s.minutes+":0"+s.seconds),s.minutes<10&&s.seconds<10&&(document.querySelector(".display").textContent="0"+s.minutes+":0"+s.seconds),s.minutes>=10&&s.seconds>=10&&(document.querySelector(".display").textContent=s.minutes+":"+s.seconds),m?(e.classList.remove("timer-session"),e.classList.toggle("timer-break")):(e.classList.remove("timer-break"),e.classList.toggle("timer-session"))),s.total<0&&(!1===m?(o=new Date(o+6e4*t.breakLength).getTime(),m=!0):(clearInterval(i),c=!1,m=!1,l=!0,document.querySelector(".display").textContent=`Session ${++a} and break ended.`),n.play()))}),1e3),c=!c),l=!l}));const u=document.querySelector("body"),b=(e,t)=>{e.classList.add(t)},p=(e,t)=>{e.textContent=t},g=(e,t)=>{e.appendChild(t)},v=document.createElement("div");v.addEventListener("click",(()=>{y.remove(),v.remove()})),b(v,"black-out");const y=document.createElement("div"),h=document.createElement("p");b(h,"form-header");const L=document.createElement("button");L.setAttribute("type","submit"),p(L,"Save"),p(h,"Pomodoro Timer Settings"),g(y,h),b(y,"settings-container");const k=document.createElement("form");k.setAttribute("method","post"),k.setAttribute("action","index.html"),b(k,"form");const E=document.createElement("input"),S=document.createElement("input");E.setAttribute("type","text"),E.setAttribute("placeholder","Enter session length..."),E.setAttribute("name","session-len"),S.setAttribute("type","text"),S.setAttribute("placeholder","Enter break length..."),S.setAttribute("name","break-len"),g(k,E),g(k,S),g(k,L),g(y,k);document.querySelector(".settings").addEventListener("click",(()=>{g(u,y),g(u,v)})),k.addEventListener("submit",(e=>{e.preventDefault();const n=k.elements["session-len"].value,s=k.elements["break-len"].value;0!==n.trim().length&&(t.sessionLength=n),0!==s.trim().length&&(t.breakLength=s),y.remove(),v.remove()})),u.addEventListener("keydown",(e=>{"Escape"===e.code&&(y.remove(),v.remove())}))})();