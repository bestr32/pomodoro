(()=>{"use strict";const e=document.querySelector(".timer");let t={sessionLength:25,breakLength:5};const n=new Audio("https://soundbible.com/grab.php?id=1531&type=mp3");let s,o,r,i,c=!1,l=!0,a=!1,m=0;const d=e=>{let t=e-(new Date).getTime();const n=Math.floor(t/1e3%60),s=Math.floor(t/1e3/60%60);return{total:t,hours:Math.floor(t/36e5%24),minutes:s,seconds:n}};document.querySelector(".reset-button").addEventListener("click",(()=>{i&&(clearInterval(i),e.classList.remove("timer-break"),e.classList.remove("timer-session"),e.classList.remove("timer-paused"),document.querySelector(".display").textContent="Click to Start!",c=!1,l=!0,a=!1)})),document.querySelector(".timer").addEventListener("click",(()=>{c?(e.classList.toggle("timer-paused"),l?o=new Date((new Date).getTime()+r).getTime():r=d(o).total):(s=(new Date).getTime(),o=new Date(s+6e4*t.sessionLength).getTime(),(()=>{let s="";i=setInterval((()=>{let r=d(o);l||(r.total>0&&(r.minutes<10?document.querySelector(".display").textContent="0"+r.minutes+":"+r.seconds:r.seconds<10&&(document.querySelector(".display").textContent=r.minutes+":0"+r.seconds),r.minutes<10&&r.seconds<10&&(document.querySelector(".display").textContent="0"+r.minutes+":0"+r.seconds),r.minutes>=10&&r.seconds>=10&&(document.querySelector(".display").textContent=r.minutes+":"+r.seconds),a?(e.classList.remove("timer-session"),e.classList.toggle("timer-break")):(e.classList.remove("timer-break"),e.classList.toggle("timer-session"))),r.total<0&&(!1===a?(o=new Date(o+6e4*t.breakLength).getTime(),s="The session has ended. Time for a break :)",a=!0):(clearInterval(i),c=!1,a=!1,l=!0,s="The break has ended. Time for a new session or end :)",document.querySelector(".display").textContent=`Session ${++m} and break ended.`),document.hasFocus()||alert(s),n.play()))}),1e3)})(),c=!c),l=!l}));const u=document.querySelector("body"),b=(e,t)=>{e.classList.add(t)},h=(e,t)=>{e.textContent=t},p=(e,t)=>{e.appendChild(t)},g=document.createElement("div");g.addEventListener("click",(()=>{v.remove(),g.remove()})),b(g,"black-out");const v=document.createElement("div"),y=document.createElement("p");b(y,"form-header");const L=document.createElement("button");L.setAttribute("type","submit"),h(L,"Save"),h(y,"Pomodoro Timer Settings"),p(v,y),b(v,"settings-container"),b(v,"flex"),b(v,"flex-center"),b(v,"flex-column");const k=document.createElement("form");k.setAttribute("method","post"),k.setAttribute("action","index.html"),b(k,"form"),b(k,"flex"),b(k,"flex-center"),b(k,"flex-column");const x=document.createElement("input"),E=document.createElement("input");x.setAttribute("type","text"),x.setAttribute("placeholder","Enter session length..."),x.setAttribute("name","session-len"),E.setAttribute("type","text"),E.setAttribute("placeholder","Enter break length..."),E.setAttribute("name","break-len"),p(k,x),p(k,E),p(k,L),p(v,k);document.querySelector(".settings").addEventListener("click",(()=>{p(u,v),p(u,g)})),k.addEventListener("submit",(e=>{e.preventDefault();const n=k.elements["session-len"].value,s=k.elements["break-len"].value;0!==n.trim().length&&(t.sessionLength=n),0!==s.trim().length&&(t.breakLength=s),v.remove(),g.remove()})),u.addEventListener("keydown",(e=>{"Escape"===e.code&&(v.remove(),g.remove())}))})();